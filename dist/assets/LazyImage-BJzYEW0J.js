import{j as e}from"./index-CNRBJ32G.js";import{r as t}from"./vendor-seEwQDT5.js";import{b as l}from"./ui-CrNHFUv9.js";const I=({src:f,alt:u,className:s="",placeholder:a})=>{const[o,i]=t.useState(!1),[c,m]=t.useState(!1),[x,g]=t.useState(!1),r=t.useRef(null);t.useEffect(()=>{const n=new IntersectionObserver(([y])=>{y.isIntersecting&&(m(!0),n.disconnect())},{threshold:.1});return r.current&&n.observe(r.current),()=>n.disconnect()},[]);const h=()=>{i(!0)},j=()=>{g(!0),i(!0)},d=e.jsx("div",{className:`bg-gray-200 flex items-center justify-center ${s}`,children:e.jsx(l,{className:"h-8 w-8 text-gray-400"})});return e.jsxs("div",{ref:r,className:`relative overflow-hidden ${s}`,children:[!c&&(a||d),c&&e.jsxs(e.Fragment,{children:[!o&&(a||d),x?e.jsx("div",{className:`bg-gray-200 flex items-center justify-center ${s}`,children:e.jsx(l,{className:"h-8 w-8 text-gray-400"})}):e.jsx("img",{src:f,alt:u,className:`${s} ${o?"opacity-100":"opacity-0"} transition-opacity duration-300`,onLoad:h,onError:j,loading:"lazy"})]})]})};export{I as L};
