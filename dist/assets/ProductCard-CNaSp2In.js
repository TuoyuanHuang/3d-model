import{u as p,a as j,j as e}from"./index-CbLxj3tM.js";import{r as x}from"./vendor-seEwQDT5.js";import{L as n}from"./router-BnLuTL28.js";import{L as y}from"./LazyImage-CsJ7Fyhr.js";import{s as N,$ as v,u as w}from"./ui-Crfp5dSv.js";import"./supabase-BZoxqOT3.js";const $=({product:s})=>{const{user:m}=p(),{addToCart:h,loading:g}=j(),[i,f]=x.useState(0),[o,d]=x.useState(!1),r=s.sizes[0],c=s.basePrice+r.priceModifier,l=s.colors[i],u=async t=>{if(t.preventDefault(),t.stopPropagation(),!m){window.location.href="/login";return}try{d(!0),await h(s.id,s.name,c,1,l.name,r.name,r.dimensions)}catch(a){console.error("Error adding to cart:",a)}finally{d(!1)}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden group",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx(n,{to:`/prodotto/${s.id}`,children:e.jsx(y,{src:l.images[0],alt:s.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"})}),s.featured&&e.jsxs("div",{className:"absolute top-3 left-3 bg-blue-600 text-white px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[e.jsx(N,{className:"h-3 w-3 fill-current"}),e.jsx("span",{children:"In Evidenza"})]}),e.jsxs("div",{className:"absolute top-3 right-3 bg-white bg-opacity-90 backdrop-blur-sm rounded-full px-2 py-1 text-xs font-medium text-gray-700",children:["â‚¬",c.toFixed(2)]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx(n,{to:`/prodotto/${s.id}`,children:e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2 hover:text-blue-600 transition-colors",children:s.name})}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:s.material.toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:s.sizes[0].dimensions})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Colore:"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:l.name})]}),e.jsxs("div",{className:"flex space-x-1",children:[s.colors.slice(0,4).map((t,a)=>e.jsx("button",{onClick:b=>{b.preventDefault(),f(a)},className:`w-6 h-6 rounded-full border-2 transition-all ${i===a?"border-blue-500 scale-110":"border-gray-300 hover:border-gray-400"} bg-gradient-to-br from-gray-200 to-gray-400`,title:t.name},a)),s.colors.length>4&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1 flex items-center",children:["+",s.colors.length-4]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(n,{to:`/prodotto/${s.id}`,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:"Dettagli"})]}),e.jsx("button",{onClick:u,disabled:o||g,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2 group",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Aggiunta..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Carrello"})]})})]})]})]})};export{$ as default};
