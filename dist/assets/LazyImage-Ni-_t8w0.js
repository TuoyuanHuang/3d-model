import{j as e}from"./index-CVmCnHMs.js";import{r as t}from"./vendor-seEwQDT5.js";import{a as l}from"./ui-g5MN1jGh.js";const I=({src:f,alt:u,className:s="",placeholder:n})=>{const[o,i]=t.useState(!1),[c,m]=t.useState(!1),[x,g]=t.useState(!1),r=t.useRef(null);t.useEffect(()=>{const a=new IntersectionObserver(([y])=>{y.isIntersecting&&(m(!0),a.disconnect())},{threshold:.1});return r.current&&a.observe(r.current),()=>a.disconnect()},[]);const h=()=>{i(!0)},j=()=>{g(!0),i(!0)},d=e.jsx("div",{className:`bg-gray-200 flex items-center justify-center ${s}`,children:e.jsx(l,{className:"h-8 w-8 text-gray-400"})});return e.jsxs("div",{ref:r,className:`relative overflow-hidden ${s}`,children:[!c&&(n||d),c&&e.jsxs(e.Fragment,{children:[!o&&(n||d),x?e.jsx("div",{className:`bg-gray-200 flex items-center justify-center ${s}`,children:e.jsx(l,{className:"h-8 w-8 text-gray-400"})}):e.jsx("img",{src:f,alt:u,className:`${s} ${o?"opacity-100":"opacity-0"} transition-opacity duration-300`,onLoad:h,onError:j,loading:"lazy"})]})]})};export{I as L};
