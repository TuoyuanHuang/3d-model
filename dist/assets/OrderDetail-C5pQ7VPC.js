import{u as v,j as e}from"./index-CNRBJ32G.js";import{r as i}from"./vendor-seEwQDT5.js";import{b as w,L as h}from"./router-BnLuTL28.js";import{z as u,o as _,b as p,u as C,D as r,h as g,d as I,e as S,f as O,x as P}from"./ui-CrNHFUv9.js";import"./supabase-BZoxqOT3.js";const D=()=>{const{orderId:l}=w(),{supabase:n}=v(),[s,j]=i.useState(null),[N,c]=i.useState(!0),[d,o]=i.useState("");i.useEffect(()=>{l&&(async()=>{try{c(!0);const{data:a,error:x}=await n.from("orders").select(`
            *,
            order_items (
              product_name,
              quantity,
              unit_price,
              selected_color
            )
          `).eq("id",l).maybeSingle();if(x)throw x;if(!a){o("Ordine non trovato");return}j(a)}catch(a){console.error("Error loading order:",a),o("Errore nel caricamento dell'ordine")}finally{c(!1)}})()},[l,n]);const f=t=>{switch(t){case"completed":case"delivered":return e.jsx(r,{className:"h-6 w-6 text-green-500"});case"processing":case"printing":case"confirmed":return e.jsx(g,{className:"h-6 w-6 text-blue-500"});case"shipped":return e.jsx(P,{className:"h-6 w-6 text-purple-500"});case"canceled":return e.jsx(u,{className:"h-6 w-6 text-red-500"});default:return e.jsx(p,{className:"h-6 w-6 text-gray-500"})}},b=t=>{switch(t){case"completed":case"delivered":return"bg-green-100 text-green-800 border-green-200";case"processing":case"printing":case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"shipped":return"bg-purple-100 text-purple-800 border-purple-200";case"canceled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},y=t=>{switch(t){case"processing":return"In Elaborazione";case"confirmed":return"Confermato";case"printing":return"In Stampa";case"completed":return"Completato";case"shipped":return"Spedito";case"delivered":return"Consegnato";case"canceled":return"Annullato";default:return t}},m=t=>new Date(t).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return N?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Caricamento ordine..."})]})}):d||!s?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(u,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Ordine non trovato"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d||"L'ordine richiesto non esiste"}),e.jsx(h,{to:"/ordini",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"Torna agli Ordini"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(h,{to:"/ordini",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium mb-4",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Torna agli ordini"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Ordine #",s.id.slice(0,8)]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Creato il ",m(s.created_at)]})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs("div",{className:`inline-flex items-center space-x-2 px-4 py-2 rounded-lg border ${b(s.order_status)}`,children:[f(s.order_status),e.jsx("span",{className:"font-medium",children:y(s.order_status)})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(p,{className:"h-5 w-5 mr-2"}),"Prodotti Ordinati"]}),e.jsx("div",{className:"space-y-4",children:s.order_items.map((t,a)=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:t.product_name}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{children:["Quantità: ",t.quantity]}),t.selected_color&&e.jsxs("span",{className:"ml-4",children:["Colore: ",t.selected_color]}),t.customer_note&&e.jsxs("div",{className:"ml-4 flex items-center text-blue-600",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"cursor-pointer hover:underline",onClick:()=>alert(`Nota: ${t.customer_note}`),children:"Nota cliente"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["€",t.unit_price.toFixed(2)]}),t.quantity>1&&e.jsxs("p",{className:"text-sm text-gray-600",children:["€",(t.unit_price*t.quantity).toFixed(2)," totale"]})]})]},a))}),e.jsx("div",{className:"border-t border-gray-200 mt-6 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[e.jsx("span",{children:"Totale Ordine:"}),e.jsxs("span",{className:"text-blue-600",children:["€",s.total_amount.toFixed(2)]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Stato dell'Ordine"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Ordine Ricevuto"}),e.jsx("p",{className:"text-sm text-gray-600",children:m(s.created_at)})]})]}),s.order_status!=="processing"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Pagamento Confermato"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pagamento elaborato con successo"})]})]}),["printing","completed","shipped","delivered"].includes(s.order_status)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"In Produzione"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Il tuo prodotto è in stampa"})]})]}),["completed","shipped","delivered"].includes(s.order_status)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Produzione Completata"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Il tuo prodotto è pronto"})]})]}),s.order_status==="printing"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(g,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"In Stampa"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Il tuo prodotto è attualmente in stampa"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informazioni Cliente"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.customer_email})]}),s.customer_phone&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(S,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.customer_phone})]})]})]}),s.shipping_address&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Indirizzo di Spedizione"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(O,{className:"h-4 w-4 text-gray-400 mt-1"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:s.customer_name}),e.jsx("p",{children:s.shipping_address.address}),e.jsxs("p",{children:[s.shipping_address.postalCode," ",s.shipping_address.city]}),e.jsx("p",{children:"Italia"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informazioni Pagamento"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Metodo:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Carta di Credito"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stato:"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Pagato"})]}),s.payment_intent_id&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ID Transazione:"}),e.jsx("span",{className:"text-sm font-mono text-gray-900",children:s.payment_intent_id})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Hai bisogno di aiuto?"}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Contattaci per qualsiasi domanda sul tuo ordine"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("a",{href:"mailto:info@3dsumisura.it",className:"block text-sm text-blue-600 hover:text-blue-700 font-medium",children:"info@3dsumisura.it"}),e.jsx("a",{href:"tel:+391234567890",className:"block text-sm text-blue-600 hover:text-blue-700 font-medium",children:"+39 123 456 7890"})]})]})]})]})]})})};export{D as default};
