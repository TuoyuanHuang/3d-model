import{u as b,j as e}from"./index-CZ0_HHih.js";import{r}from"./vendor-seEwQDT5.js";import{L as l}from"./router-BnLuTL28.js";import{E as d,b as o,K as N,D as y,B as v,h as w,o as _}from"./ui-zOJd_8GS.js";import"./supabase-BZoxqOT3.js";const z=()=>{const{supabase:i}=b(),[n,m]=r.useState([]),[x,u]=r.useState(!0),[c,h]=r.useState("");r.useEffect(()=>{(async()=>{try{const{data:t,error:a}=await i.from("orders").select(`
            *,
            order_items (
              product_name,
              quantity,
              unit_price,
              selected_color
            )
          `).order("created_at",{ascending:!1});if(a)throw a;m(t||[])}catch(t){h("Errore nel caricamento degli ordini"),console.error("Error loading orders:",t)}finally{u(!1)}})()},[i]);const p=s=>{switch(s){case"completed":case"delivered":return e.jsx(_,{className:"h-5 w-5 text-green-500"});case"processing":case"printing":case"confirmed":return e.jsx(w,{className:"h-5 w-5 text-blue-500"});case"shipped":return e.jsx(v,{className:"h-5 w-5 text-purple-500"});case"canceled":return e.jsx(d,{className:"h-5 w-5 text-red-500"});default:return e.jsx(o,{className:"h-5 w-5 text-gray-500"})}},g=s=>{switch(s){case"completed":case"delivered":return"bg-green-100 text-green-800";case"processing":case"printing":case"confirmed":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"canceled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=s=>{switch(s){case"processing":return"In Elaborazione";case"confirmed":return"Confermato";case"printing":return"In Stampa";case"completed":return"Completato";case"shipped":return"Spedito";case"delivered":return"Consegnato";case"canceled":return"Annullato";default:return s}},f=s=>new Date(s).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return x?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Caricamento ordini..."})]})}):c?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(d,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Errore"}),e.jsx("p",{className:"text-gray-600 mb-4",children:c}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium",children:"Riprova"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"I Miei Ordini"}),e.jsx("p",{className:"text-gray-600",children:"Visualizza lo stato dei tuoi ordini e la cronologia degli acquisti"})]}),n.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[e.jsx(o,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nessun ordine trovato"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Non hai ancora effettuato nessun ordine"}),e.jsx(l,{to:"/catalogo",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Esplora il Catalogo"})]}):e.jsx("div",{className:"space-y-6",children:n.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:["Ordine #",s.id.slice(0,8)]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:f(s.created_at)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsxs("span",{children:["€",s.total_amount.toFixed(2)]})]})]})]}),e.jsx("div",{className:"mt-3 sm:mt-0",children:e.jsxs("span",{className:`inline-flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium ${g(s.order_status)}`,children:[p(s.order_status),e.jsx("span",{children:j(s.order_status)})]})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Prodotti"}),e.jsx("div",{className:"space-y-3",children:s.order_items.map((t,a)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.product_name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Quantità: ",t.quantity]}),t.selected_color&&e.jsxs("span",{children:["Colore: ",t.selected_color]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["€",t.unit_price.toFixed(2)]}),t.quantity>1&&e.jsxs("p",{className:"text-sm text-gray-600",children:["€",(t.unit_price*t.quantity).toFixed(2)," totale"]})]})]},a))})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[s.order_status==="processing"&&"Il tuo ordine è in elaborazione",s.order_status==="printing"&&"Il tuo ordine è in stampa",s.order_status==="completed"&&"Il tuo ordine è stato completato",s.order_status==="shipped"&&"Il tuo ordine è stato spedito",s.order_status==="delivered"&&"Il tuo ordine è stato consegnato"]}),e.jsx("div",{className:"flex space-x-3",children:e.jsx(l,{to:`/ordini/${s.id}`,className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Visualizza Dettagli"})})]})})]})},s.id))})]})})};export{z as default};
