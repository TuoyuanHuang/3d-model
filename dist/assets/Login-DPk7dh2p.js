import{u as A,j as e}from"./index-CbLxj3tM.js";import{r as t}from"./vendor-seEwQDT5.js";import{c as k,L as U}from"./router-BnLuTL28.js";import{U as v,D as q,o as F,G as L,J as R}from"./ui-Crfp5dSv.js";import"./supabase-BZoxqOT3.js";const O=()=>{const[o,c]=t.useState(""),[i,d]=t.useState(""),[m,S]=t.useState(!1),[g,l]=t.useState(!1),[p,a]=t.useState(""),[r,b]=t.useState(!1),[f,u]=t.useState(""),[j,x]=t.useState(""),[N,h]=t.useState(""),{signIn:C,user:y,supabase:E}=A(),w=k();t.useEffect(()=>{y&&w("/")},[y,w]);const P=r?async s=>{if(s.preventDefault(),l(!0),a(""),h(""),i!==j){a("Le password non coincidono"),l(!1);return}if(i.length<6){a("La password deve essere di almeno 6 caratteri"),l(!1);return}try{const{error:n}=await E.auth.signUp({email:o,password:i,options:{data:{full_name:f}}});n?a(n.message):(h("Account creato con successo! Controlla la tua email per confermare l'account."),b(!1),c(""),d(""),u(""),x(""))}catch{a("Errore durante la registrazione")}finally{l(!1)}}:async s=>{s.preventDefault(),l(!0),a("");try{const{error:n}=await C(o,i);n&&a("Credenziali non valide")}catch{a("Errore durante il login")}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:r?"Registrati":"Accedi"}),e.jsx("p",{className:"text-gray-600 mt-2",children:r?"Crea un nuovo account per iniziare":"Accedi al tuo account per continuare"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[p&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(q,{className:"h-5 w-5 text-red-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-800",children:"Errore"}),e.jsx("p",{className:"text-sm text-red-700",children:p})]})]}),N&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(F,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-800",children:"Successo"}),e.jsx("p",{className:"text-sm text-green-700",children:N})]})]}),r&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo"}),e.jsx("input",{id:"name",type:"text",required:!0,value:f,onChange:s=>u(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Mario Rossi"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{id:"email",type:"email",required:!0,value:o,onChange:s=>c(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"mario@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:m?"text":"password",required:!0,value:i,onChange:s=>d(s.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:()=>S(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m?e.jsx(L,{className:"h-4 w-4 text-gray-400"}):e.jsx(R,{className:"h-4 w-4 text-gray-400"})})]})]}),r&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Conferma Password"}),e.jsx("input",{id:"confirmPassword",type:"password",required:!0,value:j,onChange:s=>x(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••"})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white py-3 px-4 rounded-lg font-semibold transition-colors duration-200 flex items-center justify-center space-x-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:r?"Registrazione...":"Accesso..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"h-5 w-5"}),e.jsx("span",{children:r?"Registrati":"Accedi"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>{b(!r),a(""),h(""),c(""),d(""),u(""),x("")},className:"text-blue-600 hover:text-blue-700 font-medium",children:r?"Hai già un account? Accedi":"Non hai un account? Registrati"})}),!r&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(U,{to:"/admin/login",className:"text-sm text-gray-600 hover:text-gray-900",children:"Sei un amministratore? Accedi qui"})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Account Demo"}),e.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Per testare il sistema, puoi registrarti con qualsiasi email o usare:"}),e.jsxs("div",{className:"text-sm font-mono text-blue-800",children:[e.jsx("p",{children:"Email: demo@3dsumisura.it"}),e.jsx("p",{children:"Password: demo123"})]})]})]})})};export{O as default};
